// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package application

import (
	"context"
	"github.com/google/wire"
	"github.com/kiosk404/airi-go/backend/api/model/llm/manage"
	"github.com/kiosk404/airi-go/backend/api/model/llm/runtime"
	"github.com/kiosk404/airi-go/backend/infra/contract/cache"
	"github.com/kiosk404/airi-go/backend/infra/contract/idgen"
	"github.com/kiosk404/airi-go/backend/infra/contract/limiter"
	"github.com/kiosk404/airi-go/backend/infra/contract/rdb"
	"github.com/kiosk404/airi-go/backend/modules/llm/domain/service"
	"github.com/kiosk404/airi-go/backend/modules/llm/domain/service/llmfactory"
	"github.com/kiosk404/airi-go/backend/modules/llm/infra/config"
	"github.com/kiosk404/airi-go/backend/modules/llm/infra/repo"
	"github.com/kiosk404/airi-go/backend/modules/llm/infra/repo/dao"
	"github.com/kiosk404/airi-go/backend/modules/llm/infra/rpc"
	"github.com/kiosk404/airi-go/backend/pkg/conf"
)

// Injectors from wire.go:

func InitRuntimeApplication(ctx context.Context, idGen idgen.IDGenerator, configFactory conf.IConfigLoaderFactory, db rdb.Provider, redis cache.Cmdable, factory limiter.IRateLimiterFactory) (runtime.LLMRuntimeService, error) {
	iConfigManage, err := config.NewManage(ctx, configFactory)
	if err != nil {
		return nil, err
	}
	iManage := service.NewManage(iConfigManage)
	iFactory := llmfactory.NewFactory()
	iModelRequestRecordDao := dao.NewModelRequestRecordDao(db)
	iRuntimeRepository := repo.NewRuntimeRepo(db, iModelRequestRecordDao)
	iConfigRuntime, err := config.NewRuntime(ctx, configFactory)
	if err != nil {
		return nil, err
	}
	iRuntime := service.NewRuntime(iFactory, idGen, iRuntimeRepository, iConfigRuntime)
	llmRuntimeService := NewRuntimeApplication(iManage, iRuntime, redis, factory)
	return llmRuntimeService, nil
}

func InitManageApplication(ctx context.Context, configFactory conf.IConfigLoaderFactory) (manage.LLMManageService, error) {
	iConfigManage, err := config.NewManage(ctx, configFactory)
	if err != nil {
		return nil, err
	}
	iManage := service.NewManage(iConfigManage)
	iAuthProvider := rpc.NewAuthRPCProvider()
	llmManageService := NewManageApplication(iManage, iAuthProvider)
	return llmManageService, nil
}

// wire.go:

var (
	llmDomainSet = wire.NewSet(llmfactory.NewFactory, config.NewManage, config.NewRuntime, service.NewRuntime, service.NewManage, repo.NewRuntimeRepo, dao.NewModelRequestRecordDao, rpc.NewAuthRPCProvider)
	runtimeSet   = wire.NewSet(
		NewRuntimeApplication,
		llmDomainSet,
	)
	manageSet = wire.NewSet(
		NewManageApplication,
		llmDomainSet,
	)
)
