# Workspace Data API Contracts

## Get Analytics Data

**Endpoint**: GET /api/analytics/{agentId}
**Description**: 获取指定 AI Agent 的分析数据

**Response**:
```json
{
  "agentId": "string",
  "tokenConsumption": 0,
  "pluginCount": 0,
  "workflowCount": 0,
  "lastActive": "2025-09-23T00:00:00.000Z"
}
```

**Error Responses**:
- 404: Agent not found
- 500: Server error

## Get Prompt

**Endpoint**: GET /api/prompts/{agentId}
**Description**: 获取指定 AI Agent 的当前提示词

**Response**:
```json
{
  "id": "string",
  "content": "string",
  "version": 0,
  "createdAt": "2025-09-23T00:00:00.000Z",
  "updatedAt": "2025-09-23T00:00:00.000Z"
}
```

**Error Responses**:
- 404: Agent not found
- 500: Server error

## Update Prompt

**Endpoint**: PUT /api/prompts/{agentId}
**Description**: 更新指定 AI Agent 的提示词

**Request**:
```json
{
  "content": "string"
}
```

**Response**:
```json
{
  "id": "string",
  "content": "string",
  "version": 1,
  "createdAt": "2025-09-23T00:00:00.000Z",
  "updatedAt": "2025-09-23T00:00:00.000Z"
}
```

**Error Responses**:
- 400: Invalid input data
- 404: Agent not found
- 500: Server error

## Chat with Agent

**Endpoint**: POST /api/chat/{agentId}
**Description**: 与指定的 AI Agent 进行对话

**Request**:
```json
{
  "message": "string"
}
```

**Response**:
```json
{
  "id": "string",
  "role": "assistant",
  "content": "string",
  "timestamp": "2025-09-23T00:00:00.000Z"
}
```

**Error Responses**:
- 400: Invalid input data
- 404: Agent not found
- 500: Server error